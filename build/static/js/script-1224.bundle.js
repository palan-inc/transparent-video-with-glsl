!function(){"use strict";var t,e,i,r,n,o,a,l,s,u,g,c,h=function(){function t(){this.classNameActive="is-active"}return t.prototype.activateDOM=function(t){t.classList.add(this.classNameActive)},t.prototype.deactivateDOM=function(t){t.classList.remove(this.classNameActive)},t}(),E=function(){function t(){this.gl=null}return t.prototype.initWebGLContext=function(t){this.gl=t.getContext("webgl")},t.prototype.getWebGLContext=function(){return this.gl},t.prototype.initTexture=function(){var t=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,t);var e=this.gl.RGBA,i=this.gl.RGBA,r=this.gl.UNSIGNED_BYTE,n=new Uint8Array([0,0,0,255]);return this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,e,1,1,0,i,r,n),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),t},t.prototype.updateTexture=function(t,e){var i=this.gl.RGBA,r=this.gl.RGBA,n=this.gl.UNSIGNED_BYTE;this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texImage2D(this.gl.TEXTURE_2D,0,i,r,n,e)},t.prototype.createShader=function(t,e){var i;switch(t){case"vertex":i=this.gl.createShader(this.gl.VERTEX_SHADER);break;case"fragment":i=this.gl.createShader(this.gl.FRAGMENT_SHADER);break;default:return}if(this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))return i;alert(this.gl.getShaderInfoLog(i)),console.log(this.gl.getShaderInfoLog(i))},t.prototype.createProgram=function(t,e){var i=this.gl.createProgram();return this.gl.attachShader(i,t),this.gl.attachShader(i,e),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.useProgram(i),i):null},t.prototype.createVbo=function(t){var e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e},t.prototype.createIbo=function(t){var e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Int16Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),e},t}(),f=E,m=0,T=new Array,d=!1;function v(t){o=t.offsetX/r,a=t.offsetY/n}function p(){g&&(m=.001*((new Date).getTime()-e),d&&t.updateTexture(s,u),l.clear(l.COLOR_BUFFER_BIT),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,s),l.uniform1f(T[0],m+0),l.uniform2fv(T[1],[o,a]),l.uniform2fv(T[2],[r,n]),l.uniform1i(T[3],0),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0),l.flush(),requestAnimationFrame(p))}new h,t=new f,window.onload=function(){u=function(t){var e=document.createElement("video"),i=!1,r=!1;function n(){i&&r&&(d=!0)}return e.autoplay=!0,e.muted=!0,e.loop=!0,e.setAttribute("preload","auto"),e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.addEventListener("playing",(function(){i=!0,n()}),!0),e.addEventListener("timeupdate",(function(){r=!0,n()}),!0),e.src="../static/video/video-1224.mp4",e.play(),e}(),c=document.getElementById("ui"),document.getElementById("ui_button").addEventListener("click",(function(){u.pause(),u.muted=!1,u.currentTime=0,u.play(),c.classList.remove("is-active"),i.classList.add("is-active")})),i=document.getElementById("canvas"),r=1280,n=360,i.width=r,i.height=n,i.addEventListener("mousemove",v,!0),t.initWebGLContext(i),l=t.getWebGLContext();var h=t.createProgram(t.createShader("vertex","\n  attribute vec3 position;\n  void main(void){\n    gl_Position = vec4(position, 1.0);\n  }\n"),t.createShader("fragment","\n  precision mediump float;\n  uniform float time;\n  uniform vec2  mouse;\n  uniform vec2  resolution;\n  uniform sampler2D map;\n\n  void main(){\n    vec2 uv = gl_FragCoord.xy/resolution.xy;\n    vec2 uvTop = vec2(uv.x, uv.y / 2.0 + 0.5);\n    vec4 colorTop = texture2D(map, uvTop);\n    vec2 uvBottom = vec2(uv.x, uv.y / 2.0);\n    vec4 alphaBottom = texture2D( map, uvBottom );\n    gl_FragColor = vec4( colorTop.r, colorTop.g, colorTop.b, alphaBottom.b);\n  }\n"));g=null!=h,T[0]=l.getUniformLocation(h,"time"),T[1]=l.getUniformLocation(h,"mouse"),T[2]=l.getUniformLocation(h,"resolution"),T[3]=l.getUniformLocation(h,"map");var E=t.createVbo([-1,1,0,1,1,0,-1,-1,0,1,-1,0]),f=t.createIbo([0,2,1,1,2,3]),m=l.getAttribLocation(h,"position");l.bindBuffer(l.ARRAY_BUFFER,E),l.enableVertexAttribArray(m),l.vertexAttribPointer(m,3,l.FLOAT,!1,0,0),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,f),l.clearColor(0,0,0,1),o=.5,a=.5,e=(new Date).getTime(),s=t.initTexture(),p()},window.addEventListener("pageshow",(function(t){t.persisted&&location.reload()}))}();